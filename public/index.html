<!DOCTYPE html>
<html translate="no">

<head>
    <link rel="manifest" href="/manifest.json">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166077524-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-166077524-1');
    </script>
          <meta name="theme-color" content="#2196F3">
          <meta name="description" content="Play/Practice/Share Sky songs with many instruments,keys and functions!">
          <meta name="keywords" content="Sky,Music,piano,harp,xylophone,drum,guitar,horn,bell,record,share,midi">
          <meta name="author" content="thoseSkyModders">
          <meta name="apple-mobile-web-app-capable" content="yes">
          <meta name="apple-mobile-web-app-title" content="Sky Music">
          <meta name="apple-mobile-web-app-status-bar-style" content="default">
          <meta name="mobile-web-app-capable" content="yes"> 
          <link rel="apple-touch-icon" href="Sky.png"> 
          <meta property="og:image" content="https://repository-images.githubusercontent.com/261796811/08f6ec80-9ce7-11ea-8bf1-800c977cfaf1">
          <meta property="og:site_name" content="Sky Music">
          <meta property="og:title" content="Sky Music App!">
          <meta property="og:url" content="https://sky-music.herokuapp.com/">
          <meta property="og:description" content="Play/Practice/Share Sky songs with many instruments,keys and functions!">
    <link rel="icon" type="image/png" href="/favicon.png"/>
    <link rel="shortcut icon" href="/favicon.png?v=2" type="image/x-icon" />
    <script src="/scripts/jquery.js"></script>
    <script src="/scripts/jqueryPEP.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>Sky Music</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

<body style="touch-action: pan-x pan-y;">

    <h1 id="failedToLoad" style="font-size: 3em;">If you see this, the website failed to load, please refresh one or two times!<br>
      In case it doesn't work, email us at thoseskymodders@gmail.com
    </h1>
    <div id="setScale">
        <h2 id="welcome-text">Welcome to Sky Music!</h2>
        <div id="scale-text">
        Press + and - to change how the page looks!<br>
        You can always change this in the settings<br>
        </div>
        <button class="skyButton" style="width: 30px; background: rgba(77,77,77,0.85);" onclick="changeScale(-1)">-</button>
        <div type="number" id="scaleNumber" style="background: rgba(77,77,77,0.85);" >100</div>%
        <button class="skyButton" style="width: 30px; background: rgba(77,77,77,0.85);" onclick="changeScale(1)">+</button><br>
        <button class="skyButton" style="background: rgba(77,77,77,0.85); width: 90%;" id="confirm-scale" onclick="confirmScale()">CONFIRM</button>
        <div style="margin-top: 1rem; font-weight: bold; color: rgba(235, 0, 27, 1)">If you are on phone and on the website, please add the website to the home screen, it will become like an app.</div>
        <br><br>
        <div>
          If you have touch issues, enable compability mode in the settings.
        </div>
        <br><br>
        <div style="margin-top: 1rem; font-weight: bold; color: rgba(235, 0, 27, 1)">
          DELETING BROWSER CACHE MIGHT DELETE YOUR SAVED SONGS, REMEMBER TO BACKUP THEM
        </div>
        <br><br>
        <div>By pressing confirm you accept our <a style="text-decoration: underline; color: #dad8b3;" href="/policy.html">Policy</a>
        </div>
    </div>
    <!--https://www.flaticon.com/free-icon/rotate-smartphone_81564?term=rotate%20phone&page=1&position=22-->
    <div id="rotateDevice" onclick="this.style.display = 'none'">
        <button onclick="ignoreRotation()"class="skyButton" id="ignore-button-rotation" style=" position:absolute; left: 0;">Never show again</button>
        <img src="icons/rotate.svg" width="50%" height="50%">
        <h1 style="margin:0.5em;" id="rotate-device-text">The website is better used in Landscape, please rotate your device.</h1>
        <h2 class="bottom" id="click-to-close-rotation"style="color: rgba(235, 0, 27, 1)">Click anywhere to close</h2>
    </div>
    <!--https://www.flaticon.com/free-icon/fullscreen_483332?term=exit%20fullscreen&page=1&position=2-->
    <img id="exitFullScreenBtn"src="icons/exitFullScreen.png" onclick="exitFullScreen()">
    <div class="secondPage" id="secondPage" onclick="$('#icon-bar').fadeOut(200),menuButton.style.display = 'block'">

        <div id="login">
            <div id="loginContainer">
              <h1 id="account-tab-text">Account</h1>
              <div>
                <label id="email-text-login" class="formLabel"><b>EMAIL</b></label>
                <input type="text" placeholder="Enter email" class="formInput" id="emailLogin">
      
                <label id="password-text-login" class="formLabel"><b>PASSWORD</b></label>
                <input type="password" placeholder="Enter Password" class="formInput" id="passwordLogin">
                <button id="login-button" onclick = "login(false)">LOGIN</button>
      
                <span onclick="toggleRegister()"><a id="create-account-button" href="#">Create account</a></span><span id="forgotLink" onclick="toggleReset()"><a id="forgot-password-text" href="#">Forgot password?</a></span>
              </div> 
            </div>
          </div>
          <div id="register">
            <div id="registerContainer">
              <h1>Registration is not available anymore</h1>
              </div>
          </div>
          <div id="confirmRegistration">
            <div id="confirmContainer">
              <h1>Registration is not available anymore</h1>
              </div>
          </div>
          <div id="resetPassword">
            <div id="resetContainer">
                <h1>Password reset is not available anymore, if needed, send us an email</h1>
              </div>
          </div>
          <div id="verifyPasswordAndCode">
            <div id="resetContainer">
              <h1>Password reset is not available anymore, if needed, send us an email</h1>

              </div>
          </div>
          <div id="settings">
              <div id="settingsContainer">
                <h1 id="settings-tab-text" >Settings</h1>
                <div style="overflow-y:scroll; height: 72vh; margin-bottom: 1em;">
                  <select name="Language" onchange="changeLanguage(this.value)"id="language-selector">
                    <option id="language-selector-text" selected disabled>Select language</option>
                    <option>English</option>
                    <option>Traditional_chinese_繁體中文</option>
                    <option>Italiano</option>
                    <option>Français</option>
                    <option>Português_Brasileiro</option>
                    <option>Deutsch</option>
                    <option>Русский</option>
                    <option>한국어</option>
                    <option>Română</option>
                    <option>Español</option>
                    <option>Tiếng_Việt</option>
                    <option>Simplified_Chinese_简体中文</option>
                    <option>Türkçe</option>
                  </select>   
                    <button onclick = "toggleScaleDiv()" id="change-zoom-button" >Change website zoom</button>
                    <button onclick = "toggleFullScreenSetting()" id="turnOffFullscreen">Turn off auto fullscreen</button> 
                    <button onclick = "reloadKeyboardSetting()" id="reload-keyboard-setting" >Reload keyboard when exiting page (If you don't hear audio)</button>   
                    <button onclick = "changeSettings(this)" id="Disable-next-key-practice">Disable next key practice</button>
                    <button onclick = "changeSettings(this)" id="Hide-practice-note-animation">Hide practice note animation</button>
                    <button onclick = "changeSettings(this)" id="Display-Note-Names">Display Note Names</button>
                    <button onclick = "choseBackground()" id="background-choser" >Change background image</button>
                    <button onclick = "resetBackground()" id="background-reset" >Reset background image</button>
                    <button onclick = "checkMidiAccess()" id="check-midi-button" >Check MIDI support</button>
                    <button onclick = "resetLocalStorage()" id="reset-all-button" >Reset all songs and settings</button>
                    <button onclick = "togglecompatibilityMode()" id="change-button-input-mode" >Turn on compability mode</button>
                    <button onclick = "toggleDarkMode()" id="toggle-dark-mode" >Turn on Dark mode</button>
                </div> 
                <span id="go-back-settings" onclick="resetPages()"><a href="#">Go back</a></span>
              </div>
          </div>
    </div>


    <div id="savedSongsDivWrapper" class="floatingDiv">
      <div id="songsFlexWrapper">
        <div class="tab"> 
            <button id="localStoredBtn" class="tablinks active" onclick="openSonglist(event, 'localSongs')">My songs</button>
            <button id="accountBtn" class="tablinks" onclick="openSonglist(event, 'dbSongs')">Account songs</button>
            <button  class="tablinks" style="background-color: teal; float:right"onclick="redirectPage('/songComposer.html')">Compose</button>
          </div>
        <!--Local Songs-->
          <div id="localSongs" class="tabcontent">
            <div id="savedSongsDiv" class="topSavedSongsDiv">
              <h3 id="local-tab-text">Here are all your songs!</h3>
            </div>
            <div class = "bottomSavedSongsDiv">
                <button id="import-button" class="skyButton" onclick="toggleImportSong()">Import songs</button>
                <button id="download-songs-button" class="skyButton" onclick="downloadSongs()">Download songs</button>
                <input type=file style="display:none;" id="filePicker" accept=".txt,.json">
            </div>
          </div>
        <!--Database Songs-->
          <div id="dbSongs" class="tabcontent">
            <h3 id="account-songs-tab-text" >Here are all the songs saved in your account!</h3>
            <div id="dbSongsDiv" class="topSavedSongsDiv"></div>
            <div class = "bottomSavedSongsDiv">
                <button id="reload-button" class="skyButton" onclick="syncDB()">Reload</button>
                <button id="store-all-button" class="skyButton" onclick="storeSongsLocally()">Store all songs locally</button>
            </div>
          </div>
        </div>
    </div>
    <div class="videoWrapper video" id="videoWrapper">
        <div class="vsc-controller" data-vscid="jvm0gu2z7"></div>
        <video id="video1"preload="auto" playsinline="" muted autoplay loop data-vscid="jvm0gu2z7">
            <source src="./AnimatedBG/skygame-banner2.mp4" type="video/mp4;codecs=&quot;avc1.42E01E, mp4a.40.2&quot;">
        </video>
    </div>
    <div id="promptDiv">
        <div id="promptMessage">Write song name</div>
        <input type="text" id="promptInput" placeholder="Song name"><br>
        <input class="skyButton" id="promptCancel" type="button" value="Cancel">
        <input class="skyButton" id="promptOK" type="button" value="OK">
    </div>
<div id="firstPage">
    <button id="menu" style="display: block;"onclick="showMenu()"></button>
    <div id="icon-bar" style="height: 200vh; ">
        <button class="skyButton_2" onclick='resetPages(),showMenu(),document.getElementById("login").style.display = "none"'><p id="main-page-text-menu" class="texts">Main page</p></button>
        <button class="skyButton_2" onclick="toggleSettings()"><p id="settings-text-menu" class="texts">Settings</p></button>        
        <a href="/songComposer.html">
          <button class="skyButton_2" style="background-color: rgb(218, 206, 179);"><p id="song-composer-text-menu" style="color:#121212" class="texts">Song composer</p></button>
        </a>
        <a href="/songLibrary.html">
          <button class="skyButton_2"><p id="library-text-menu" class="texts">Song Library</p></button>
        </a>
        <a href="/sheetDisplayer.html">
          <button class="skyButton_2"><p id="sheet-displayer-text-menu"  class="texts">Sheet displayer</p></button>
        </a>
        <a href="https://sky-music.specy.app">
          <button class="skyButton_2" style="background-color: rgb(218, 206, 179);"><p style="color:#121212" class="texts">Sky music nightly</p></button>
        </a>
        <button class="skyButton_2" onclick="toggleLogin()"><p id="account-text-menu" class="texts">Account</p></button>
        <a href="/help.html">
          <button class="skyButton_2"><p id="help-text-menu"  class="texts">Need help?</p></button>
        </a>
        <div class="skyButton_2 " id="storageWrapper">
          <div class="texts percentageWrapper">
            Storage used 
            <div id="percentageStorage">0%</div>
          </div>
          <div id="progressBarWrapper">
            <div id="progressBar">

            </div>
          </div>
        </div>
    </div>
    <div class="menuDiv">
        <div class="subMenuDiv shift40px">
          <button class="skyButton" id="manageRecordingsBtn" onclick="toggleSavedSongs()">Manage Recordings</button>
          <button class="skyButton" id="toggleRecordBtn" onclick="toggleRecord()"> Start/Stop recording</button>
        </div>
        <div  class="subMenuDiv shift40px2">
          <button class="musicButton" id="toggleInstruments" onclick="toggleInstrumentList()"></button>
          <button class="pitchButton" id="togglePitchList" onclick="togglePitchList()">Key</button>
          <button class="pitchButton" id="toggleReverbBtn" style="font-size: 1.3em; background-image: url(./icons/reverb.png);" onclick="toggleReverb()"></button>
          <button id="stopSong" onclick="stopSong()"></button>
        </div>
    </div>
    <div id=touch>
        <div class="Row1" id="row1"></div>
        <div class="Row2" id="row2"></div>
        <div class="Row3" id="row3"></div>
    </div>
    <div id="instrumentsNew" class="instrumentsWrapper">
        <button type="button" id="pianoBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/piano.png);"></button>
        <button type="button" id="harpBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/harp.png);"></button>
        <button type="button" id="guitarBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/guitar.png);"></button>
        <button type="button" id="fluteBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/flute.png);"></button>
        <button type="button" id="xylophoneBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/xylophone.png);"></button>
        <button type="button" id="hornBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/horn.png);"></button>
        <button type="button" id="winterPianoBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/winterPiano.png);"></button>
        <button type="button" id="drumBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/drum.png);"></button>
        <button type="button" id="handPanBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/handPan.png);"></button>  
        <button type="button" id="bellBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/bell.png);"></button>
        <button type="button" id="contrabassBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/contrabass.png);"></button>
        <button type="button" id="dundunBtn" class="instrumentButton" onclick="changeInstrument(this)" style="background-image: url(./images/dundun.png);" /></button>
        <button type="button" id="trumpetBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/trumpet.png);"/></button> 
        <button type="button" id="pipaBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/pipa.png);"/></button> 
        <button type="button" id="ocarinaBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/ocarina.png);"/></button> 
        <button type="button" id="kalimbaBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/kalimba.png);"/></button> 
        <!--
        <button type="button" id="banjoBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/banjoBtn.png);"/></button> 
        <button type="button" id="panfluteBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/panflute.png);"/></button>  
        TO REMOVE ONCE NEW INSTRUMENTS ARE ADDED
        -->
        <div id="old-text" style="color: rgba(235, 0, 27, 1); font-weight: bold; margin-top: 15px; margin-bottom: 5px; font-size: 0.8em;">
            OLD
        </div>
        <button type="button" id="oldPianoBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/piano.png);"></button>
        
        <button type="button" id="oldHarpBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/harp.png);"></button>
        <div style="color: rgba(235, 0, 27, 1); font-weight: bold; margin-top: 15px; margin-bottom: 5px; font-size: 0.8em;">
          OTHER
      </div>
        <button type="button" id="toyUkuleleBtn" class="instrumentButton"  onclick="changeInstrument(this)" style="background-image: url(./images/ToyUkulele.png);"></button>
        
    </div>
    <div id="pitchTab" class="instrumentsWrapper">
        <button class="pitchSelection" id="pitch1" key=1 onclick="changePitch(this)">C</button>
        <button class="pitchSelection" id="pitch2" key=2 onclick="changePitch(this)">D♭</button>
        <button class="pitchSelection" id="pitch3" key=3 onclick="changePitch(this)">D</button>
        <button class="pitchSelection" id="pitch4" key=4 onclick="changePitch(this)">E♭</button>
        <button class="pitchSelection" id="pitch5" key=5 onclick="changePitch(this)">E</button>
        <button class="pitchSelection" id="pitch6" key=6 onclick="changePitch(this)">F</button>
        <button class="pitchSelection" id="pitch7" key=7 onclick="changePitch(this)">G♭</button>
        <button class="pitchSelection" id="pitch8" key=8 onclick="changePitch(this)">G</button>
        <button class="pitchSelection" id="pitch9" key=9 onclick="changePitch(this)">A♭</button>
        <button class="pitchSelection" id="pitch10" key=10 onclick="changePitch(this)">A</button>
        <button class="pitchSelection" id="pitch11" key=11 onclick="changePitch(this)">B♭</button>
        <button class="pitchSelection" id="pitch12" key=12 onclick="changePitch(this)" style="border:none;">B</button>
    </div>
    <div id="songRange" class="songRange">
        <input type="number" id="startingNoteRange" value="0"><br>
        <input id="rangePicker" type="range" max="10" min="0" orient="vertical" ><br>
        <input type="button" style="background-color: transparent; border: none; font-size: 1.5em; outline: none;" onclick="retry()" value="🔄">
        <div class="songProgressWrapper">
          <div  class="songProgress" id="songProgress">
          </div>
        </div>
    </div>
</div>
    <div id="floatingMessage" class="floatingMessage"> placeholder text </div>
    <div id="formatChooser">
      <div id="importText" style="width: 100%;">Select format</div>
      <div id="formatImport" class="format" style="flex-direction: column; height: 100%;">
        <div style="display: flex; height: 65%;">
          <div class="formatButton" onclick="toggleABCImport()">
            <p>
              ABC1-5
            </p>
          </div>
          <div class="formatButton" style = "color: rgb(22,22,22); background-color: #5e8e63;"onclick="importSongs()">
            <p>.TXT<br>json
              <br>
              <a style="font-size: 0.5em;">(suggested)</a>
            </p>
          </div>
        </div>
        <div class="formatButton midiImport" onclick="redirectPage('/songComposer.html?importMidi=true')">
          <p>
            MIDI
          </p>
        </div>
      </div>
      <div id="formatOutput" class="format" style="display: none; height: 80%;">
        <div class="formatButton" onclick="toggleABCExport()">
          <p>
            ABC1-5
          </p>
        </div>
        <div class="formatButton" style = "color: rgb(22,22,22); background-color: #5e8e63;"onclick="downloadSong()">
          <p>.TXT<br>json
            <br>
            <a style="font-size: 0.5em;">(suggested)</a>
          </p>
        </div>
      </div>
      <div id="abcImport" class="format" style="display: none; height: 100%;">
        <div id="importAbcData">
          <div>
            Name:
            <input id="nameImport" type="text" placeholder="name">
          </div>
          <div>
            BPM:
            <input id="bpmImport" type="number" value="220">
          </div>
        </div>
        <textarea id="abcTextarea" placeholder="Paste song here, ex: A1 A2 A3 . A4 A5"></textarea>
        <button id="importAbc" onclick="importABC()">Import</button>
      </div>
      <div id="abcExport" class="format" style="display: none; height: 100%;">
        <textarea id="abcTextareaExport" onclick="this.setSelectionRange(0, this.value.length)" readonly></textarea>
        <button id="exportAbc" onclick="downloadAbc()">Download</button>
      </div>
    </div>
</body>

 <!-- <input type="sleeping" placeholder="username" style="display: none"> Easter egg-->
<script src="/scripts/jqueryUI.js"></script>
<script type="text/javascript" src="app.js"></script>

</html>
